{"version":3,"sources":["../../../../src/upload/js/index.js"],"names":["a","Vue","el","data","hasVideo","Vsrc","showpBtn","progressVisible","progress","uploading","timer","methods","preview","$refs","video","pause","uploadFile","value","setInterval","watch","val","setTimeout","Toast","message","position","duration","clearTimeout"],"mappings":";;AACA,IAAIA,IAAI,IAAIC,GAAJ,CACN;AACEC,MAAI,KADN;AAEEC,MAFF,kBAES;AACL,WAAO;AACLC,gBAAU,KADL;AAELC,YAAM,EAFD;AAGLC,gBAAU,KAHL;AAIL;AACAC,uBAAiB,KALZ;AAMLC,gBAAU,CANL;AAOLC,iBAAW,KAPN;AAQLC,aAAO;AARF,KAAP;AAUD,GAbH;;AAcEC,WAAS;AACPC,WADO,qBACG;AACR,WAAKR,QAAL,GAAgB,CAAC,KAAKA,QAAtB;AACA,WAAKS,KAAL,CAAWC,KAAX,CAAiBC,KAAjB;AACD,KAJM;;AAKP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGAC,cAhEO,wBAgEM;AAAA;;AACX,UAAI,CAAC,KAAKP,SAAV,EAAqB;AACnB,aAAKQ,KAAL,GAAa,CAAb;AACA,aAAKV,eAAL,GAAuB,IAAvB;AACA,aAAKE,SAAL,GAAiB,IAAjB;AACA,aAAKC,KAAL,GAAaQ,YAAY;AAAA,iBAAM,MAAKV,QAAL,EAAN;AAAA,SAAZ,EAAmC,EAAnC,CAAb;AACD;AACF;AAvEM,GAdX;AAuFEW,SAAO;AACLX,YADK,oBACIY,GADJ,EACS;AACZ,UAAIA,OAAO,GAAX,EAAgB;AACd,aAAKX,SAAL,GAAiB,KAAjB;AACA,aAAKF,eAAL,GAAuB,KAAvB;AACAc,mBAAW;AAAA,iBAAMC,MAAM,EAAEC,SAAS,MAAX,EAAmBC,UAAU,QAA7B,EAAuCC,UAAU,IAAjD,EAAN,CAAN;AAAA,SAAX,EAAiF,GAAjF;AACAC,qBAAa,KAAKhB,KAAlB;AACD;AACF;AARI;AAvFT,CADM,CAAR;;AAqGA","file":"index.js","sourcesContent":["\r\nlet a = new Vue(\r\n  {\r\n    el: '#up',\r\n    data() {\r\n      return {\r\n        hasVideo: false,\r\n        Vsrc: '',\r\n        showpBtn: false,\r\n        // isVideo: false\r\n        progressVisible: false,\r\n        progress: 0,\r\n        uploading: false,\r\n        timer: null\r\n      };\r\n    },\r\n    methods: {\r\n      preview() {\r\n        this.hasVideo = !this.hasVideo;\r\n        this.$refs.video.pause();\r\n      },\r\n      // handleSuccess() {\r\n      //\r\n      //   // this.showpBtn = this.isVideo;  // 如果是视频,展示预览btn\r\n      //   this.$message({\r\n      //     message: '上传成功',\r\n      //     type: 'success'\r\n      //   });\r\n      // },\r\n      // handleRemove(file, fileList) {\r\n      //   this.showpBtn = false;\r\n      //\r\n      //   console.log(file, fileList);\r\n      // },\r\n      // // handlePreview(file) {\r\n      // //   console.log(file);\r\n      // // },\r\n      // beforeUpload(file) {\r\n      //   // console.log(file.type);\r\n      //   const reg = /image/gi;  // 匹配image/*\r\n      //   const reg2 = /video\\/(mov|mp4)/gi;  // 匹配video/mov 或者 video/mp4\r\n      //   const isImage = reg.test(file.type);\r\n      //   const isMP4 = reg2.test(file.type);\r\n      //   // this.isVideo = isMP4;\r\n      //   const fileSize = file.size / 1024 / 1024;  // 文件的大小 M\r\n      //   console.log('文件大小是:' + fileSize + 'M', '类型是:' + file.type);\r\n      //\r\n      //   const isLt2M = fileSize < 2;\r\n      //   const isLt10M = fileSize < 10;\r\n      //\r\n      //   if (!isImage && !isMP4) {\r\n      //     this.$message({\r\n      //       showClose: true,\r\n      //       message: '视频或图片的格式错误',\r\n      //       type: \"error\"\r\n      //     });\r\n      //     return false\r\n      //   }\r\n      //   if (isImage && !isLt2M) {\r\n      //     this.$message({\r\n      //       showClose: true,\r\n      //       message: '上传图片大小不能超过 2MB!',\r\n      //       type: \"error\"\r\n      //     });\r\n      //     return false\r\n      //\r\n      //   }\r\n      //   if (isMP4 && !isLt10M) {\r\n      //     this.$message({\r\n      //       showClose: true,\r\n      //       message: '上传视频大小不能超过 10MB!',\r\n      //       type: \"error\"\r\n      //     });\r\n      //     return false\r\n      //\r\n      //   }\r\n      //   return true\r\n      // },\r\n\r\n\r\n      uploadFile() {\r\n        if (!this.uploading) {\r\n          this.value = 0;\r\n          this.progressVisible = true;\r\n          this.uploading = true;\r\n          this.timer = setInterval(() => this.progress++, 10);\r\n        }\r\n      }\r\n    },\r\n    watch: {\r\n      progress(val) {\r\n        if (val >= 100) {\r\n          this.uploading = false;\r\n          this.progressVisible = false;\r\n          setTimeout(() => Toast({ message: '上传成功', position: 'bottom', duration: 1000 }), 200);\r\n          clearTimeout(this.timer);\r\n        }\r\n      }\r\n    },\r\n  }\r\n);\r\n\r\n// console.log(a)"]}